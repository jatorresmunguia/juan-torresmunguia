<div class="js-toggle-wrapper">
    <div class="js-toggle">
        <div class="js-toggle-track">
            <div class="js-toggle-track-check">
                <img src="data:image/png;base64,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" alt="" />
            </div>
            <div class="js-toggle-track-background"></div>
            <div class="js-toggle-track-button"></div>
        </div>
    </div>
</div>

<style>
    .js-toggle-wrapper {
        display: inline-block;
        position: relative;
        width: 50px;
        height: 26px;
        vertical-align: middle;
    }

    .js-toggle {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 13px;
        background-color: #ccc;
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .js-toggle .js-toggle-track {
        position: relative;
        width: 100%;
        height: 100%;
        background-color: #fff;
        border-radius: 12px;
        box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    .js-toggle .js-toggle-track-check {
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 38px;
        height: 26px;
        padding: 0 4px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: flex-end;
        transition: transform 0.3s;
    }

    .js-toggle .js-toggle-track-check img {
        display: block;
        width: 100%;
        height: auto;
    }

    .js-toggle .js-toggle-track-background {
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 100%;
        height: 26px;
        border-radius: 13px;
        background-color: #ccc;
        transition: background-color 0.3s;
    }

    .js-toggle .js-toggle-track-button {
        position: absolute;
        left: 0;
        top: 0;
        width: 22px;
        height: 22px;
        margin: 2px;
        background-color: #fff;
        border-radius: 50%;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        transition: transform 0.3s;
    }

    .js-toggle.active .js-toggle-track-check {
        transform: translateX(-12px);
    }

    .js-toggle.active .js-toggle-track-background {
        background-color: #6ab04c;
    }

    .js-toggle.active .js-toggle-track-button {
        transform: translateX(24px);
    }
</style>
<script>
    var body = document.body;
	var switcher = document.getElementsByClassName('js-toggle')[0];

	//Click on dark mode icon. Add dark mode classes and wrappers. Store user preference through sessions
	switcher.addEventListener("click", function() {
        this.classList.toggle('js-toggle--checked');
        this.classList.add('js-toggle--focus');
		//If dark mode is selected
		if (this.classList.contains('js-toggle--checked')) {
			body.classList.add('dark-mode');
			//Save user preference in storage
			localStorage.setItem('darkMode', 'true');
		} else {
			body.classList.remove('dark-mode');
			setTimeout(function() {
				localStorage.removeItem('darkMode');
			}, 100);
		}
	})

	//Check Storage. Keep user preference on page reload
	if (localStorage.getItem('darkMode')) {
		//body.classList.add('dark-mode');
        switcher.classList.add('js-toggle--checked');
        body.classList.add('dark-mode');
	}

</script>
